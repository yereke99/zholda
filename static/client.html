<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>–ó–∞–∫–∞–∑–∞—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É | –ñ–µ—Ç–∫—ñ–∑—É–≥–µ —Ç–∞–ø—Å—ã—Ä—ã—Å –±–µ—Ä—É</title>
  <link rel="stylesheet" href="/static/client/style.css">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://api-maps.yandex.ru/v3/?apikey=8a3e4da0-9ef2-4176-9203-e7014c1dba6f&lang=ru_RU"></script>
</head>
<body>
  <!-- Permission Dialog -->
  <div id="permissionDialog" class="permission-dialog" style="display: none;">
    <div class="permission-content">
      <div class="permission-icon">üìç</div>
      <div class="permission-title" data-ru="–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é" data-kz="–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è“ì–∞ —Ä“±“õ—Å–∞—Ç">–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é</div>
      <div class="permission-message" data-ru="–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ—á–Ω–æ–π –∑–∞—è–≤–∫–∏ –Ω–∞–º –Ω—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø –∫ –≤–∞—à–µ–º—É –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—é. –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –≤–æ–¥–∏—Ç–µ–ª—è–º –Ω–∞–π—Ç–∏ –≤–∞—Å –±—ã—Å—Ç—Ä–µ–µ." data-kz="–î”ô–ª ”©—Ç—ñ–Ω—ñ–º –∂–∞—Å–∞—É “Ø—à—ñ–Ω –±—ñ–∑–≥–µ —Å—ñ–∑–¥—ñ“£ –æ—Ä–Ω–∞–ª–∞—Å“õ–∞–Ω –∂–µ—Ä—ñ“£—ñ–∑–≥–µ “õ–æ–ª –∂–µ—Ç–∫—ñ–∑—É –∫–µ—Ä–µ–∫. –ë“±–ª –∂“Ø—Ä–≥—ñ–∑—É—à—ñ–ª–µ—Ä–≥–µ —Å—ñ–∑–¥—ñ —Ç–µ–∑—ñ—Ä–µ–∫ —Ç–∞–±—É“ì–∞ –∫”©–º–µ–∫—Ç–µ—Å–µ–¥—ñ.">
        –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ—á–Ω–æ–π –∑–∞—è–≤–∫–∏ –Ω–∞–º –Ω—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø –∫ –≤–∞—à–µ–º—É –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—é. –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –≤–æ–¥–∏—Ç–µ–ª—è–º –Ω–∞–π—Ç–∏ –≤–∞—Å –±—ã—Å—Ç—Ä–µ–µ.
      </div>
      <div class="permission-buttons">
        <button class="permission-btn primary" onclick="requestLocationPermission()">
          <span data-ru="–†–∞–∑—Ä–µ—à–∏—Ç—å GPS" data-kz="GPS —Ä“±“õ—Å–∞—Ç –±–µ—Ä—É">–†–∞–∑—Ä–µ—à–∏—Ç—å GPS</span>
        </button>
        <button class="permission-btn secondary" onclick="skipLocationPermission()">
          <span data-ru="–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å" data-kz="”®—Ç–∫—ñ–∑—ñ–ø –∂—ñ–±–µ—Ä—É">–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</span>
        </button>
      </div>
    </div>
  </div>

  <div class="main-container">
    <div class="lang-switch">
      <button onclick="setLang('ru')" id="lang-ru" class="active">RU</button>
      <button onclick="setLang('kz')" id="lang-kz">KZ</button>
    </div>

    <div class="content-wrapper">
      <!-- Step 0: Check Registration -->
      <div id="step0" class="page active">
        <div style="text-align: center; padding: 20px;">
          <div class="welcome-icon">üì¶</div>
          <h1 data-ru="–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏..." data-kz="–¢—ñ—Ä–∫–µ–ª—É–¥—ñ —Ç–µ–∫—Å–µ—Ä—É...">–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏...</h1>
          <p class="welcome-subtitle" data-ru="–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ" data-kz="–ö“Ø—Ç–µ —Ç“±—Ä—ã“£—ã–∑">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ</p>
        </div>
      </div>

      <!-- Step 1: Offerta -->
      <div id="step1" class="page">
        <div class="form-progress"></div>
        <h1 data-ru="–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ" data-kz="–ü–∞–π–¥–∞–ª–∞–Ω—É—à—ã –∫–µ–ª—ñ—Å—ñ–º—ñ">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ</h1>
        <div class="offerta-container">
          <h2 data-ru="–û—Ñ–µ—Ä—Ç–∞ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤" data-kz="–ö–ª–∏–µ–Ω—Ç—Ç–µ—Ä–≥–µ –∞—Ä–Ω–∞–ª“ì–∞–Ω –æ—Ñ–µ—Ä—Ç–∞">–û—Ñ–µ—Ä—Ç–∞ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤</h2>
          <p data-ru="–ù–∞—Å—Ç–æ—è—â–µ–µ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ (–¥–∞–ª–µ–µ ‚Äî –°–æ–≥–ª–∞—à–µ–Ω–∏–µ) —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–µ–∂–¥—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–µ–π —Å–µ—Ä–≤–∏—Å–∞ –ª–æ–≥–∏—Å—Ç–∏–∫–∏ (–¥–∞–ª–µ–µ ‚Äî –°–µ—Ä–≤–∏—Å) –∏ –∫–ª–∏–µ–Ω—Ç–æ–º (–¥–∞–ª–µ–µ ‚Äî –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)."
             data-kz="–û—Å—ã –ü–∞–π–¥–∞–ª–∞–Ω—É—à—ã –∫–µ–ª—ñ—Å—ñ–º—ñ (–±“±–¥–∞–Ω ”ô—Ä—ñ ‚Äî –ö–µ–ª—ñ—Å—ñ–º) –ª–æ–≥–∏—Å—Ç–∏–∫–∞ “õ—ã–∑–º–µ—Ç—ñ–Ω—ñ“£ ”ô–∫—ñ–º—à—ñ–ª—ñ–≥—ñ (–±“±–¥–∞–Ω ”ô—Ä—ñ ‚Äî “ö—ã–∑–º–µ—Ç) –º–µ–Ω –∫–ª–∏–µ–Ω—Ç (–±“±–¥–∞–Ω ”ô—Ä—ñ ‚Äî –ü–∞–π–¥–∞–ª–∞–Ω—É—à—ã) –∞—Ä–∞—Å—ã–Ω–¥–∞“ì—ã “õ–∞—Ç—ã–Ω–∞—Å—Ç–∞—Ä–¥—ã —Ä–µ—Ç—Ç–µ–π–¥—ñ.">
            –ù–∞—Å—Ç–æ—è—â–µ–µ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ (–¥–∞–ª–µ–µ ‚Äî –°–æ–≥–ª–∞—à–µ–Ω–∏–µ) —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–µ–∂–¥—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–µ–π —Å–µ—Ä–≤–∏—Å–∞ –ª–æ–≥–∏—Å—Ç–∏–∫–∏ (–¥–∞–ª–µ–µ ‚Äî –°–µ—Ä–≤–∏—Å) –∏ –∫–ª–∏–µ–Ω—Ç–æ–º (–¥–∞–ª–µ–µ ‚Äî –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å).
          </p>
          <p data-ru="1. –ü—Ä–µ–¥–º–µ—Ç —Å–æ–≥–ª–∞—à–µ–Ω–∏—è. –°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤–æ–¥–∏—Ç–µ–ª–µ–π –∏ –∑–∞–∫–∞–∑–∞ —É—Å–ª—É–≥ –≥—Ä—É–∑–æ–ø–µ—Ä–µ–≤–æ–∑–∫–∏."
             data-kz="1. –ö–µ–ª—ñ—Å—ñ–º–Ω—ñ“£ –º”ô–Ω—ñ. “ö—ã–∑–º–µ—Ç –∂“Ø—Ä–≥—ñ–∑—É—à—ñ–ª–µ—Ä–¥—ñ —ñ–∑–¥–µ—É –∂”ô–Ω–µ –∂“Ø–∫ —Ç–∞—Å—ã–º–∞–ª–¥–∞—É “õ—ã–∑–º–µ—Ç—Ç–µ—Ä—ñ–Ω–µ —Ç–∞–ø—Å—ã—Ä—ã—Å –±–µ—Ä—É “Ø—à—ñ–Ω –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ “±—Å—ã–Ω–∞–¥—ã.">
            1. –ü—Ä–µ–¥–º–µ—Ç —Å–æ–≥–ª–∞—à–µ–Ω–∏—è. –°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤–æ–¥–∏—Ç–µ–ª–µ–π –∏ –∑–∞–∫–∞–∑–∞ —É—Å–ª—É–≥ –≥—Ä—É–∑–æ–ø–µ—Ä–µ–≤–æ–∑–∫–∏.
          </p>
          <p data-ru="2. –ü—Ä–∞–≤–∞ –∏ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–∞. –ö–ª–∏–µ–Ω—Ç –æ–±—è–∑—É–µ—Ç—Å—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≥—Ä—É–∑–µ, –º–∞—Ä—à—Ä—É—Ç–µ –∏ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö."
             data-kz="2. –ö–ª–∏–µ–Ω—Ç—Ç—ñ“£ “õ“±“õ—ã“õ—Ç–∞—Ä—ã –º–µ–Ω –º—ñ–Ω–¥–µ—Ç—Ç–µ—Ä—ñ. –ö–ª–∏–µ–Ω—Ç –∂“Ø–∫, –º–∞—Ä—à—Ä—É—Ç –∂”ô–Ω–µ –±–∞–π–ª–∞–Ω—ã—Å –¥–µ—Ä–µ–∫—Ç–µ—Ä—ñ —Ç—É—Ä–∞–ª—ã –¥“±—Ä—ã—Å –∞“õ–ø–∞—Ä–∞—Ç –±–µ—Ä—É–≥–µ –º—ñ–Ω–¥–µ—Ç—Ç–µ–Ω–µ–¥—ñ.">
            2. –ü—Ä–∞–≤–∞ –∏ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–∞. –ö–ª–∏–µ–Ω—Ç –æ–±—è–∑—É–µ—Ç—Å—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≥—Ä—É–∑–µ, –º–∞—Ä—à—Ä—É—Ç–µ –∏ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
          </p>
          <p data-ru="3. –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å. –ö–ª–∏–µ–Ω—Ç –Ω–µ—Å–µ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ—Å—Ç—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ —Å–≤–æ–µ–≤—Ä–µ–º–µ–Ω–Ω—É—é –æ–ø–ª–∞—Ç—É —É—Å–ª—É–≥."
             data-kz="3. –ñ–∞—É–∞–ø–∫–µ—Ä—à—ñ–ª—ñ–∫. –ö–ª–∏–µ–Ω—Ç –±–µ—Ä—ñ–ª–≥–µ–Ω –∞“õ–ø–∞—Ä–∞—Ç—Ç—ã“£ –¥“±—Ä—ã—Å—Ç—ã“ì—ã –∂”ô–Ω–µ “õ—ã–∑–º–µ—Ç—Ç–µ—Ä–¥—ñ —É–∞“õ—Ç—ã–ª—ã —Ç”©–ª–µ—É “Ø—à—ñ–Ω –∂–∞—É–∞–ø—Ç—ã.">
            3. –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å. –ö–ª–∏–µ–Ω—Ç –Ω–µ—Å–µ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ—Å—Ç—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ —Å–≤–æ–µ–≤—Ä–µ–º–µ–Ω–Ω—É—é –æ–ø–ª–∞—Ç—É —É—Å–ª—É–≥.
          </p>
          <p data-ru="4. –û–ø–ª–∞—Ç–∞ —É—Å–ª—É–≥. –û–ø–ª–∞—Ç–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –≤–æ–¥–∏—Ç–µ–ª—é —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏."
             data-kz="4. “ö—ã–∑–º–µ—Ç—Ç–µ—Ä–¥—ñ —Ç”©–ª–µ—É. –¢”©–ª–µ–º –∫–µ–ª—ñ—Å—ñ–º –±–æ–π—ã–Ω—à–∞ –∂“Ø—Ä–≥—ñ–∑—É—à—ñ–≥–µ —Ç—ñ–∫–µ–ª–µ–π –∂“Ø—Ä–≥—ñ–∑—ñ–ª–µ–¥—ñ.">
            4. –û–ø–ª–∞—Ç–∞ —É—Å–ª—É–≥. –û–ø–ª–∞—Ç–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –≤–æ–¥–∏—Ç–µ–ª—é —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏.
          </p>
          <p data-ru="5. –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å. –°–µ—Ä–≤–∏—Å –æ–±—è–∑—É–µ—Ç—Å—è –Ω–µ —Ä–∞–∑–≥–ª–∞—à–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞ —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º."
             data-kz="5. “ö“±–ø–∏—è–ª—ã–ª—ã“õ. “ö—ã–∑–º–µ—Ç –∫–ª–∏–µ–Ω—Ç—Ç—ñ“£ –∂–µ–∫–µ –¥–µ—Ä–µ–∫—Ç–µ—Ä—ñ–Ω “Ø—à—ñ–Ω—à—ñ —Ç“±–ª“ì–∞–ª–∞—Ä“ì–∞ –∂–∞—Ä–∏—è–ª–∞–º–∞—É“ì–∞ –º—ñ–Ω–¥–µ—Ç—Ç–µ–Ω–µ–¥—ñ.">
            5. –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å. –°–µ—Ä–≤–∏—Å –æ–±—è–∑—É–µ—Ç—Å—è –Ω–µ —Ä–∞–∑–≥–ª–∞—à–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞ —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º.
          </p>
        </div>
        <div class="checkbox-container">
          <input type="checkbox" id="acceptOfferta">
          <label for="acceptOfferta" data-ru="–Ø –ø—Ä–æ—á–∏—Ç–∞–ª –∏ –ø—Ä–∏–Ω–∏–º–∞—é —É—Å–ª–æ–≤–∏—è —Å–æ–≥–ª–∞—à–µ–Ω–∏—è" data-kz="–ú–µ–Ω –∫–µ–ª—ñ—Å—ñ–º —à–∞—Ä—Ç—Ç–∞—Ä—ã–Ω –æ“õ—ã–¥—ã–º –∂”ô–Ω–µ “õ–∞–±—ã–ª–¥–∞–π–º—ã–Ω">–Ø –ø—Ä–æ—á–∏—Ç–∞–ª –∏ –ø—Ä–∏–Ω–∏–º–∞—é —É—Å–ª–æ–≤–∏—è —Å–æ–≥–ª–∞—à–µ–Ω–∏—è</label>
        </div>
        <button id="continueToForm" class="btn" disabled>
          <span>‚úÖ</span>
          <span data-ru="–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å" data-kz="–ñ–∞–ª“ì–∞—Å—Ç—ã—Ä—É">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</span>
        </button>
      </div>

      <!-- Step 2: Request Form with Enhanced Map -->
      <div id="step2" class="page">
        <div class="form-progress"></div>
        <h1 data-ru="–ó–∞–∫–∞–∑–∞—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É" data-kz="–ñ–µ—Ç–∫—ñ–∑—É–≥–µ —Ç–∞–ø—Å—ã—Ä—ã—Å –±–µ—Ä—É">–ó–∞–∫–∞–∑–∞—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É</h1>
        
        <div id="mapContainer">
          <div id="clientMap"></div>
          <div class="route-info" id="routeInfo" style="display: none;">
            <span id="routeDistance"></span>
          </div>
          <div class="location-status" id="locationStatus" style="display: none;">
            <div class="pulse"></div>
            <span id="locationText"></span>
          </div>
          <div class="map-controls">
            <button class="map-control-btn toggle-size-btn" onclick="toggleMapSize()" title="–ò–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä –∫–∞—Ä—Ç—ã">
              <span class="size-text">üìç –ë–û–õ–¨–®–ê–Ø</span>
            </button>
          </div>
        </div>
        
        <div class="form-container">
          <form id="clientForm">
            <!-- FROM Address with Enhanced Map Button -->
            <div class="form-group">
              <label for="from_address">
                <span class="emoji">üìç</span>
                <span data-ru="–û—Ç–∫—É–¥–∞" data-kz="“ö–∞–π–¥–∞–Ω">–û—Ç–∫—É–¥–∞</span>
              </label>
              <div class="address-input-container">
                <input type="text" id="from_address" name="from_address" class="address-input" 
                       placeholder="–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –Ω–∞ –∫–∞—Ä—Ç–µ" required>
                <button type="button" class="address-map-btn from-btn from-map-btn" onclick="selectOnMap('from')">
                  üó∫Ô∏è –ö–ê–†–¢–ê
                </button>
              </div>
              <div id="from_address_suggestions" class="suggestions-container" style="display: none;"></div>
            </div>
            
            <!-- TO Address with Enhanced Map Button -->
            <div class="form-group">
              <label for="to_address">
                <span class="emoji">üéØ</span>
                <span data-ru="–ö—É–¥–∞" data-kz="“ö–∞–π–¥–∞">–ö—É–¥–∞</span>
              </label>
              <div class="address-input-container">
                <input type="text" id="to_address" name="to_address" class="address-input" 
                       placeholder="–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –Ω–∞ –∫–∞—Ä—Ç–µ" required>
                <button type="button" class="address-map-btn to-btn to-map-btn" onclick="selectOnMap('to')">
                  üó∫Ô∏è –ö–ê–†–¢–ê
                </button>
              </div>
              <div id="to_address_suggestions" class="suggestions-container" style="display: none;"></div>
            </div>
            
            <!-- Price Input -->
            <div class="form-group">
              <label for="price">
                <span class="emoji">üí∞</span>
                <span data-ru="–¶–µ–Ω–∞" data-kz="–ë–∞“ì–∞—Å—ã">–¶–µ–Ω–∞</span>
              </label>
              <div class="price-input">
                <input type="number" id="price" name="price" min="2000" placeholder="–ú–∏–Ω–∏–º—É–º 2000" required>
                <span class="price-currency">‚Ç∏</span>
              </div>
            </div>
            
            <!-- Truck Type Selection -->
            <div class="form-group">
              <label>
                <span class="emoji">üöö</span>
                <span data-ru="–¢–∏–ø —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞" data-kz="–ö”©–ª—ñ–∫ —Ç“Ø—Ä—ñ">–¢–∏–ø —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞</span>
              </label>
              <div class="truck-types">
                <div class="truck-type" data-type="small">
                  <span class="truck-icon">üöê</span>
                  <span class="truck-name" data-ru="–ú–∞–ª—ã–π" data-kz="–ö—ñ—à—ñ">–ú–∞–ª—ã–π</span>
                </div>
                <div class="truck-type" data-type="medium">
                  <span class="truck-icon">üöö</span>
                  <span class="truck-name" data-ru="–°—Ä–µ–¥–Ω–∏–π" data-kz="–û—Ä—Ç–∞">–°—Ä–µ–¥–Ω–∏–π</span>
                </div>
                <div class="truck-type" data-type="large">
                  <span class="truck-icon">üöõ</span>
                  <span class="truck-name" data-ru="–ë–æ–ª—å—à–æ–π" data-kz="“Æ–ª–∫–µ–Ω">–ë–æ–ª—å—à–æ–π</span>
                </div>
                <div class="truck-type" data-type="refrigerator">
                  <span class="truck-icon">‚ùÑÔ∏è</span>
                  <span class="truck-name" data-ru="–†–µ—Ñ—Ä–∏–∂." data-kz="–†–µ—Ñ—Ä–∏–∂.">–†–µ—Ñ—Ä–∏–∂.</span>
                </div>
                <div class="truck-type" data-type="tow">
                  <span class="truck-icon">üöó</span>
                  <span class="truck-name" data-ru="–≠–≤–∞–∫—É–∞—Ç–æ—Ä" data-kz="–≠–≤–∞–∫—É–∞—Ç–æ—Ä">–≠–≤–∞–∫—É–∞—Ç–æ—Ä</span>
                </div>
              </div>
              <input type="hidden" name="truck_type" id="truck_type" required>
            </div>
            
            <!-- Comment -->
            <div class="form-group">
              <label for="comment">
                <span class="emoji">üí¨</span>
                <span data-ru="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π" data-kz="–¢“Ø—Å—ñ–Ω—ñ–∫—Ç–µ–º–µ">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</span>
              </label>
              <textarea id="comment" name="comment" 
                        placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥—Ä—É–∑–µ"></textarea>
            </div>
            
            <!-- Optional Photo -->
            <div class="form-group optional-field">
              <label for="item_photo">
                <span class="emoji">üì∏</span>
                <span data-ru="–§–æ—Ç–æ –≥—Ä—É–∑–∞" data-kz="–ñ“Ø–∫ —Ñ–æ—Ç–æ—Å—ã">–§–æ—Ç–æ –≥—Ä—É–∑–∞</span>
                <span class="optional-label" data-ru="(–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)" data-kz="(–º—ñ–Ω–¥–µ—Ç—Ç—ñ –µ–º–µ—Å)">(–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</span>
              </label>
              <input type="file" id="item_photo" name="item_photo" accept="image/*">
            </div>
            
            <!-- Contact Number -->
            <div class="form-group">
              <label for="contact">
                <span class="emoji">üì±</span>
                <span data-ru="–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä" data-kz="–ë–∞–π–ª–∞–Ω—ã—Å –Ω”©–º—ñ—Ä—ñ">–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä</span>
              </label>
              <input type="tel" id="contact" name="contact" placeholder="+7 (___) ___-__-__" required>
            </div>
            
            <!-- Hidden coordinate fields -->
            <input type="hidden" name="from_lat" id="from_lat">
            <input type="hidden" name="from_lon" id="from_lon">
            <input type="hidden" name="to_lat" id="to_lat">
            <input type="hidden" name="to_lon" id="to_lon">
            <input type="hidden" name="telegram_id" id="telegram_id">
          </form>
        </div>
      </div>

      <!-- Step 3: Preview -->
      <div id="step3" class="page">
        <div class="form-progress"></div>
        <h1 data-ru="–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ" data-kz="–î–µ—Ä–µ–∫—Ç–µ—Ä–¥—ñ —Ç–µ–∫—Å–µ—Ä—ñ“£—ñ–∑">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ</h1>
        <div id="previewContent"></div>
      </div>

      <!-- Step 4: Success & Drivers List -->
      <div id="step4" class="page">
        <div class="success-page">
          <div class="success-icon">‚úÖ</div>
          <h1 data-ru="–ó–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∞!" data-kz="”®—Ç—ñ–Ω—ñ–º –∂–∞—Å–∞–ª–¥—ã!">–ó–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∞!</h1>
          <p class="success-subtitle" data-ru="–ü–æ–¥—Ö–æ–¥—è—â–∏–µ –≤–æ–¥–∏—Ç–µ–ª–∏" data-kz="“ö–æ–ª–∞–π–ª—ã –∂“Ø—Ä–≥—ñ–∑—É—à—ñ–ª–µ—Ä">–ü–æ–¥—Ö–æ–¥—è—â–∏–µ –≤–æ–¥–∏—Ç–µ–ª–∏</p>
        </div>
        
        <div id="driversList" class="drivers-container">
          <!-- Drivers will be loaded here -->
        </div>
        
        <div class="button-group" style="margin-top: 16px;">
          <button class="btn btn-secondary" onclick="Telegram.WebApp.close()">
            <span>‚ùå</span>
            <span data-ru="–ó–∞–∫—Ä—ã—Ç—å" data-kz="–ñ–∞–±—É">–ó–∞–∫—Ä—ã—Ç—å</span>
          </button>
        </div>
      </div>
    </div>

    <div class="fixed-bottom-buttons" id="fixedButtons">
      <div class="button-group">
        <button type="button" id="backBtn" class="nav-btn" style="display: none;">‚Üê <span data-ru="–ù–∞–∑–∞–¥" data-kz="–ê—Ä—Ç“õ–∞">–ù–∞–∑–∞–¥</span></button>
      </div>
    </div>
  </div>

  <!-- Driver Detail Modal -->
  <div id="driverModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 data-ru="–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–æ–¥–∏—Ç–µ–ª–µ" data-kz="–ñ“Ø—Ä–≥—ñ–∑—É—à—ñ —Ç—É—Ä–∞–ª—ã –∞“õ–ø–∞—Ä–∞—Ç">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–æ–¥–∏—Ç–µ–ª–µ</h2>
        <button class="close-btn" onclick="closeModal()">&times;</button>
      </div>
      
      <div id="modalContent">
        <!-- Content will be loaded here -->
      </div>
    </div>
  </div>

  <!-- Service scripts in correct order -->
  <script src="/static/client/locationService.js"></script>
  <script src="/static/client/mapService.js"></script>
  <script src="/static/client/formService.js"></script>
  <script src="/static/client/driverService.js"></script>
  <script src="/static/client/appService.js"></script>
</body>
</html>
